# Comprehensive Quality Checklist: Application Filters

**Purpose**: Full requirements audit covering completeness, faithful port fidelity, contract-spec alignment, and test coverage gaps
**Created**: 2026-01-30
**Feature**: [spec.md](../spec.md)
**Depth**: Thorough (all 4 focus areas)
**Audience**: Author/reviewer pre-implementation gate

## Requirement Completeness

- [x] CHK001 Are all 30+ filters from Python PTK `app.py` `__all__` list accounted for across FR-001 through FR-007? [Completeness, Spec §FR-001..FR-007] — **PASS**: FR-001 (11 props) + FR-003 (BufferHasFocus) + FR-005 (11 Vi) + FR-006 (3 Emacs) + FR-007 (3 Search) = 29 properties + FR-002 (4 HasFocus overloads) + FR-004 (InEditingMode) = 34 total. All Python PTK `__all__` exports covered.
- [x] CHK002 Does FR-001 list all 11 AppFilters properties, including `HasSuggestion`, `IsDone`, `RendererHeightIsKnown`, and `InPasteMode` which are missing from the existing implementation? [Completeness, Spec §FR-001] — **PASS**: FR-001 explicitly lists all 11: HasSelection, HasSuggestion, HasCompletions, CompletionIsSelected, IsReadOnly, IsMultiline, HasValidationError, HasArg, IsDone, RendererHeightIsKnown, InPasteMode.
- [x] CHK003 Are `HasFocus` overloads for all 4 argument types (string, Buffer, IUIControl, IContainer) explicitly enumerated in FR-002? [Completeness, Spec §FR-002] — **PASS**: FR-002 says "accepting a buffer name (string), a Buffer instance, a UIControl instance, or a Container instance".
- [x] CHK004 Does FR-005 enumerate all 11 Vi filters including `ViSearchDirectionReversed`? [Completeness, Spec §FR-005] — **PASS**: FR-005 lists all 11: ViMode, ViNavigationMode, ViInsertMode, ViInsertMultipleMode, ViReplaceMode, ViReplaceSingleMode, ViSelectionMode, ViWaitingForTextObjectMode, ViDigraphMode, ViRecordingMacro, ViSearchDirectionReversed.
- [x] CHK005 Are the `BufferHasFocus` filter requirements captured in a dedicated FR (FR-003), separate from the `HasFocus` overloads? [Completeness, Spec §FR-003] — **PASS**: FR-003 is a separate FR: "System MUST provide a BufferHasFocus filter that returns true when the currently focused control is a BufferControl".
- [x] CHK006 Is the `InEditingMode` factory method documented as both a method (FR-004) and with its caching requirement (FR-012)? [Completeness, Spec §FR-004, §FR-012] — **PASS**: FR-004 defines the factory method, FR-012 defines the memoization requirement. Both present.
- [x] CHK007 Are all 3 SearchFilters (`IsSearching`, `ControlIsSearchable`, `ShiftSelectionMode`) listed in FR-007? [Completeness, Spec §FR-007] — **PASS**: FR-007 lists all three.
- [x] CHK008 Are all 3 EmacsFilters (`EmacsMode`, `EmacsInsertMode`, `EmacsSelectionMode`) listed in FR-006? [Completeness, Spec §FR-006] — **PASS**: FR-006 lists all three.

## Requirement Clarity

- [x] CHK009 Is the `HasCompletions` logic explicitly defined as checking `CompleteState is not null && Completions.Count > 0` rather than just `Completer is not null`? [Clarity, Spec §FR-001] — **PASS**: Edge Case 4 explicitly says "checks that completions exist and the count is greater than zero". Contract and data-model define the full logic.
- [x] CHK010 Is the `CompletionIsSelected` logic explicitly defined as requiring both `CompleteState is not null` AND `CurrentCompletion is not null`? [Clarity, Spec §FR-001] — **PASS**: US1-AS4 says "completions showing and one selected" implying both conditions. Contract defines: `CompleteState is not null && CompleteState.CurrentCompletion is not null`.
- [x] CHK011 Is `HasSuggestion` explicitly defined as requiring non-null suggestion AND non-empty text (not just non-null)? [Clarity, Spec §FR-001, Edge Case 5] — **PASS**: US1-AS13 (empty suggestion → false) and Edge Case 5 ("checks that the suggestion text is non-empty") make this unambiguous.
- [x] CHK012 Are the Vi Guard A and Guard B patterns explicitly documented with all their constituent conditions? [Clarity, Spec §FR-008] — **PASS**: FR-008 lists all conditions: operator pending, digraph wait, selection (Guard A); temp nav, read-only (Guard B additions).
- [x] CHK013 Is it clear that Guard A applies only to `ViNavigationMode` while Guard B applies to `ViInsertMode`, `ViInsertMultipleMode`, `ViReplaceMode`, `ViReplaceSingleMode`? [Clarity, Spec §FR-008] — **PASS**: FR-008 uses "additionally ViInsertMode, ViInsertMultipleMode, ViReplaceMode, ViReplaceSingleMode MUST return false when temporary navigation mode or read-only buffer is active" — the "additionally" clearly separates Guard B targets from Guard A.
- [x] CHK014 Is the `ViNavigationMode` positive logic (Navigation OR TemporaryNavigation OR ReadOnly) specified separately from its guard conditions? [Clarity, Spec §FR-008, US3-AS11..12] — **STRENGTHENED**: Added explicit positive logic to FR-008: "ViNavigationMode MUST return true when in Vi mode and the input mode is Navigation, OR when temporary navigation mode is active, OR when the buffer is read-only (read-only forces navigation behavior)". Added US3-AS17 for the read-only positive case.
- [x] CHK015 Is the distinction between "no memoization for HasFocus" (FR-013) and "memoization required for InEditingMode" (FR-012) unambiguous? [Clarity, Spec §FR-012, §FR-013] — **PASS**: FR-012 uses "MUST use memoization", FR-013 uses "MUST NOT be globally memoized". Clear MUST vs MUST NOT.
- [x] CHK016 Is the `HasFocus(IContainer)` walk behavior explicitly defined as depth-first traversal checking descendant windows? [Clarity, Spec §FR-010] — **PASS**: FR-010 says "walk the container's child windows and return true if any child window is the currently focused window". Edge Case 9 reinforces. Implementation detail (depth-first) is in research R-008 and contract — appropriate separation.
- [x] CHK017 Is `InPasteMode` defined as delegating to `app.PasteMode.Invoke()` rather than checking a boolean property? [Clarity, data-model §AppFilters] — **PASS**: Spec level says "returns true when paste mode is active" (US1-AS12). Implementation delegation (`PasteMode.Invoke()`) is correctly in the contract and data-model — appropriate separation of spec vs implementation detail.

## Requirement Consistency

- [x] CHK018 Are the filter-to-class assignments in the spec consistent with `docs/api-mapping.md` lines 795-848? (Vi filters in ViFilters, Emacs in EmacsFilters, Search in SearchFilters, remainder in AppFilters) [Consistency, Spec §FR-001..FR-007, api-mapping.md] — **PASS**: FR-001 assigns 11 props to AppFilters, FR-003 assigns BufferHasFocus to AppFilters, FR-005 assigns 11 to ViFilters, FR-006 assigns 3 to EmacsFilters, FR-007 assigns 3 to SearchFilters. Matches api-mapping.md.
- [x] CHK019 Do the contracts (app-filters.md, vi-filters.md, emacs-filters.md, search-filters.md) enumerate the same filters as the spec's FR-001 through FR-007? [Consistency, contracts vs spec] — **PASS**: app-filters.md (12 properties + 5 methods = FR-001 + FR-002 + FR-003 + FR-004), vi-filters.md (11 = FR-005), emacs-filters.md (3 = FR-006), search-filters.md (3 = FR-007). All match.
- [x] CHK020 Does the data-model.md entity table match the contract method signatures for all 33 filters? [Consistency, data-model vs contracts] — **PASS**: AppFilters (17 entries), ViFilters (11), EmacsFilters (3), SearchFilters (3) = 34 total. All match between data-model tables and contract signatures.
- [x] CHK021 Is the `DummyApplication` behavior consistent across all artifacts? (Emacs mode by default: Vi filters return false, EmacsMode/EmacsInsertMode return true) [Consistency, research.md §R-001, emacs-filters.md §DummyApplication Note] — **STRENGTHENED**: Fixed research.md R-001 blanket statement from "false for all filters" to "false for most filters" with explicit exception noting EmacsMode/EmacsInsertMode return true. Now consistent with emacs-filters.md DummyApplication Note, updated SC-002, and updated Edge Case 1.
- [x] CHK022 Is the `HasFocus` non-memoization rationale consistent between FR-013, research.md §R-002, and the contract's behavioral notes? [Consistency, Spec §FR-013, research §R-002, contract] — **PASS**: All three artifacts consistently state: no memoization, new instance per call, rationale = avoid memory leaks from retaining references to disposed controls.
- [x] CHK023 Are Guard A/B definitions consistent between spec §FR-008, research §R-004, vi-filters.md contract, and data-model.md? [Consistency across 4 artifacts] — **PASS**: All 4 artifacts list identical conditions. Guard A: not Vi, operator, digraph, selection. Guard B: Guard A + temp nav + read-only. Verified across spec FR-008, research R-004, vi-filters.md guard code blocks, and data-model guard patterns section.
- [x] CHK024 Does the plan.md project structure match the contracts and data-model in terms of which files are CREATED vs MODIFIED? [Consistency, plan.md §Project Structure] — **PASS**: Plan lists AppFilters.cs MODIFY, ViFilters.cs CREATE, EmacsFilters.cs CREATE, SearchFilters.cs CREATE. Matches the 4 static classes in contracts and data-model.

## Faithful Port Fidelity

- [x] CHK025 Does the spec reference all Python PTK `app.py` line ranges for each filter group? (lines 58-217 for AppFilters, 220-359 for Vi, 362-385 for Emacs, 388-413 for Search) [Fidelity, contracts] — **PASS**: Line ranges are in contracts (appropriate place for source references): app-filters.md (58-217), vi-filters.md (220-359), emacs-filters.md (362-385), search-filters.md (388-413). Also in quickstart.md with per-filter line references.
- [x] CHK026 Is the `has_focus` non-memoization design note from Python PTK lines 53-57 captured and referenced? [Fidelity, Spec §FR-013, Edge Case 2] — **PASS**: FR-013, Edge Case 2, research R-002, and app-filters.md contract all reference this Python PTK design decision.
- [x] CHK027 Are the existing 6 semantic corrections (R-005) against the current AppFilters.cs explicitly documented as required changes? [Fidelity, research §R-005] — **PASS**: Research R-005 documents all 10 corrections (6 semantic fixes + 4 organizational moves). Quickstart.md Step 1 lists the implementation order for these corrections.
- [x] CHK028 Is the `ViSearchDirectionReversed` filter defined as `app.ReverseViSearchDirection.Invoke()` matching Python PTK line 416-419? [Fidelity, vi-filters.md contract] — **PASS**: vi-filters.md contract: `AppContext.GetApp().ReverseViSearchDirection.Invoke()`. Data-model: `app.ReverseViSearchDirection.Invoke()`. Matches Python PTK.
- [x] CHK029 Does the `ViNavigationMode` spec capture BOTH the guard-false path AND the three-way positive OR (`Navigation || TemporaryNavigation || ReadOnly`) from Python PTK lines 226-246? [Fidelity, Spec §FR-008, US3-AS1..12] — **STRENGTHENED**: Added explicit positive logic to FR-008 and added US3-AS17 (read-only → ViNavigationMode true). Now covers guard-false path (FR-008 first sentence), positive path (FR-008 last sentence), and all three positive cases via acceptance scenarios (AS2 = Navigation, Edge Case 8 = TemporaryNavigation, AS17 = ReadOnly).
- [x] CHK030 Is the `InEditingMode` memoization approach (`SimpleCache<EditingMode, IFilter>` capacity 2) consistent with Python PTK's `@memoized()` at line 202? [Fidelity, research §R-003] — **PASS**: Research R-003 details the mapping from `@memoized()` to `SimpleCache<EditingMode, IFilter>` with capacity 2. Contract confirms.
- [x] CHK031 Are the `EmacsInsertMode` guard conditions (not Emacs mode, selection active, read-only buffer) all ported from Python PTK lines 370-378? [Fidelity, emacs-filters.md contract] — **PASS**: emacs-filters.md contract logic: `if (EditingMode != Emacs || SelectionState != null || ReadOnly) return false`. All three guards present. Matches PTK lines 370-378.
- [x] CHK032 Is the `ControlIsSearchable` filter defined as checking `BufferControl` type AND non-null `SearchBufferControl` property, matching Python PTK lines 404-413? [Fidelity, search-filters.md contract] — **PASS**: search-filters.md: `control is BufferControl bc && bc.SearchBufferControl is not null`. Includes Python reference code block. Matches PTK.
- [x] CHK033 Does the `ShiftSelectionMode` spec check both `SelectionState is not null` AND `ShiftMode == true`, matching Python PTK line 392-394? [Fidelity, search-filters.md contract] — **PASS**: search-filters.md: `selectionState is not null && selectionState.ShiftMode`. Both conditions present.
- [x] CHK034 Is the removal of the non-PTK `HasFocus` property (current AppFilters.cs line 76-77) explicitly documented as a required correction? [Fidelity, research §R-005 item 5] — **PASS**: Research R-005 item 5: "HasFocus property... does not exist in Python PTK. Should be removed." Quickstart.md Step 1.4: "Remove HasFocus property (not in Python PTK)".

## Contract-Spec Alignment

- [x] CHK035 Does app-filters.md contract list exactly 12 IFilter properties + 5 methods (4 HasFocus overloads + InEditingMode)? [Alignment, contract vs Spec §FR-001..FR-004] — **PASS**: Contract lists 12 properties (11 from FR-001 + BufferHasFocus from FR-003) and 5 methods (4 HasFocus overloads from FR-002 + InEditingMode from FR-004). Total 17 entries match spec.
- [x] CHK036 Does vi-filters.md contract list exactly 11 IFilter properties matching FR-005? [Alignment, contract vs Spec §FR-005] — **PASS**: 11 properties: ViMode, ViNavigationMode, ViInsertMode, ViInsertMultipleMode, ViReplaceMode, ViReplaceSingleMode, ViSelectionMode, ViWaitingForTextObjectMode, ViDigraphMode, ViRecordingMacro, ViSearchDirectionReversed.
- [x] CHK037 Does emacs-filters.md contract list exactly 3 IFilter properties matching FR-006? [Alignment, contract vs Spec §FR-006] — **PASS**: EmacsMode, EmacsInsertMode, EmacsSelectionMode.
- [x] CHK038 Does search-filters.md contract list exactly 3 IFilter properties matching FR-007? [Alignment, contract vs Spec §FR-007] — **PASS**: IsSearching, ControlIsSearchable, ShiftSelectionMode.
- [x] CHK039 Are the Guard A/B behavioral notes in vi-filters.md consistent with the guard condition logic in FR-008? [Alignment, contract vs Spec §FR-008] — **PASS**: Contract Guard A/B code blocks match FR-008 conditions exactly. Verified constituent-by-constituent.
- [x] CHK040 Does the `InEditingMode` contract specify `SimpleCache<EditingMode, IFilter>` capacity 2 matching FR-012 and research §R-003? [Alignment, contract vs Spec §FR-012] — **PASS**: Contract: "Caching: SimpleCache<EditingMode, IFilter> with capacity 2". Matches FR-012 and research R-003.
- [x] CHK041 Do all 4 contracts include the behavioral note that filters return false with DummyApplication, matching FR-009? [Alignment, contracts vs Spec §FR-009] — **PASS**: All 4 contracts include DummyApplication fallback notes: app-filters.md ("DummyApplication fallback"), vi-filters.md ("DummyApplication uses Emacs mode by default"), emacs-filters.md (with exception note), search-filters.md ("no search active, no searchable controls").
- [x] CHK042 Does the emacs-filters.md contract note the exception that `EmacsMode` and `EmacsInsertMode` return TRUE with DummyApplication? [Alignment, contract §DummyApplication Note vs research §R-001] — **PASS**: emacs-filters.md includes "Important DummyApplication Note" section explicitly stating EmacsMode and EmacsInsertMode return true. Now consistent with updated research R-001 and updated SC-002.

## Acceptance Criteria Quality

- [x] CHK043 Does SC-001 ("every filter has a corresponding filter with matching boolean semantics") have a defined verification method? [Measurability, Spec §SC-001] — **PASS**: Verified via the acceptance scenarios in US1-US6 which define expected boolean behavior for each filter. The phrase "across all tested scenarios" ties SC-001 to these concrete scenarios.
- [x] CHK044 Is SC-002 ("all filters return false without exceptions outside application context") testable via DummyApplication without requiring null-context simulation? [Measurability, Spec §SC-002] — **STRENGTHENED**: Fixed SC-002 to explicitly note the Emacs exception: "except EmacsFilters.EmacsMode and EmacsFilters.EmacsInsertMode which return true because the DummyApplication defaults to Emacs editing mode with no selection and a writable buffer". Now accurately testable.
- [x] CHK045 Is SC-005 ("InEditingMode memoization returns identical instances") verifiable via `ReferenceEquals` or `object.ReferenceEquals`? [Measurability, Spec §SC-005] — **PASS**: SC-005 says "verified by reference equality". US6-AS3 says "same cached filter instance". Testing pattern: `Assert.Same(f1, f2)`.
- [x] CHK046 Is SC-006 ("Vi guard conditions correctly suppress mode filters") measurable for ALL guard constituent conditions (operator pending, digraph, selection, temp nav, read-only)? [Measurability, Spec §SC-006] — **PASS**: SC-006 lists all 5 conditions in parentheses. Each is testable by setting the corresponding ViState/Buffer property and asserting the filter returns false.
- [x] CHK047 Is SC-004 ("80% coverage") achievable given the planned 6 test files and the number of filters/branches to cover? [Measurability, Spec §SC-004] — **PASS**: 4 source files (~520 total LOC), 6 test files with 60+ acceptance scenarios after strengthening. 80% is achievable.

## Scenario Coverage

- [x] CHK048 Are acceptance scenarios defined for all 11 AppFilters properties (US1), not just a subset? [Coverage, Spec §US1] — **STRENGTHENED**: Added US1-AS5 for `HasCompletions` positive case ("Given an application with active completions showing"). All 11 properties now have explicit positive acceptance scenarios: HasSelection (AS1), CompletionIsSelected (AS4), HasCompletions (AS5), IsReadOnly (AS6), HasValidationError (AS7), HasArg (AS8), IsDone (AS9), RendererHeightIsKnown (AS10), IsMultiline (AS11), InPasteMode (AS12), HasSuggestion (AS13).
- [x] CHK049 Are acceptance scenarios defined for all 4 HasFocus overloads (string, Buffer, IUIControl, IContainer) in US2? [Coverage, Spec §US2] — **PASS**: US2 covers string (AS1/AS2), Buffer (AS3), UIControl (AS4), Container (AS5). All 4 overloads.
- [x] CHK050 Are acceptance scenarios defined for ALL 11 Vi filters in US3, including `ViInsertMultipleMode`, `ViReplaceSingleMode`, and `ViSearchDirectionReversed`? [Coverage, Spec §US3] — **STRENGTHENED**: Added US3-AS1 (ViMode positive) and US3-AS4 (ViInsertMultipleMode positive). All 11 Vi filters now have explicit positive scenarios: ViMode (AS1), ViNavigationMode (AS2), ViInsertMode (AS3), ViInsertMultipleMode (AS4), ViReplaceMode (AS5), ViReplaceSingleMode (AS6), ViSelectionMode (AS7), ViWaitingForTextObjectMode (AS8), ViDigraphMode (AS9), ViRecordingMacro (AS10), ViSearchDirectionReversed (AS18).
- [x] CHK051 Does US3 include negative scenarios for ALL guard conditions (operator pending, digraph, selection, temp nav, read-only)? [Coverage, Spec §US3-AS10..12] — **STRENGTHENED**: Added US3-AS13 (digraph wait → false) and US3-AS14 (selection → false). All 5 guard constituents now have explicit negative scenarios: operator pending (AS12), digraph wait (AS13), selection (AS14), temp nav (AS15), read-only (AS16).
- [x] CHK052 Does US4 include scenarios for both the selection-overrides-insert case and the read-only case for `EmacsInsertMode`? [Coverage, Spec §US4-AS4..5] — **PASS**: US4-AS4 (selection → false) and US4-AS5 (read-only → false). Both present.
- [x] CHK053 Does US5 include a scenario distinguishing shift-mode selection from non-shift selection (e.g., Vi visual mode)? [Coverage, Spec §US5-AS4..5] — **PASS**: US5-AS4 (shift-mode → true) and US5-AS5 (non-shift → false). Distinction is clear.
- [x] CHK054 Does US6 include a scenario verifying `InEditingMode` cache identity (same instance for same input)? [Coverage, Spec §US6-AS3] — **PASS**: US6-AS3 says "both return the same cached filter instance".

## Edge Case Coverage

- [x] CHK055 Is the "no application context" edge case (DummyApplication fallback) documented with expected behavior for ALL filter classes? [Edge Cases, Spec §Edge Case 1, §FR-009] — **STRENGTHENED**: Updated Edge Case 1 to explicitly note: "except EmacsFilters.EmacsMode and EmacsFilters.EmacsInsertMode which return true because DummyApplication defaults to Emacs editing mode with no selection and a writable buffer." Consistent with updated SC-002 and research R-001.
- [x] CHK056 Is the "HasFocus called many times with same name" edge case explicitly requiring new instances each time? [Edge Cases, Spec §Edge Case 2, §FR-013] — **PASS**: Edge Case 2 says "Each call creates a new filter instance (no memoization)".
- [x] CHK057 Is the "Vi filter evaluated in Emacs mode" edge case defined (all Vi filters return false)? [Edge Cases, Spec §Edge Case 3] — **PASS**: Edge Case 3 says "All Vi filters return false."
- [x] CHK058 Is the "HasCompletions with zero completions" edge case defined (returns false even with non-null CompleteState)? [Edge Cases, Spec §Edge Case 4] — **PASS**: Edge Case 4 says "returns false (checks that completions exist and the count is greater than zero)."
- [x] CHK059 Is the "empty suggestion text" edge case explicitly requiring false return? [Edge Cases, Spec §Edge Case 5] — **PASS**: Edge Case 5 says "returns false (checks that the suggestion text is non-empty)."
- [x] CHK060 Is the "InEditingMode from multiple threads" edge case defined with thread-safety guarantee? [Edge Cases, Spec §Edge Case 7] — **PASS**: Edge Case 7 says "Memoization is thread-safe and returns the same instance."
- [x] CHK061 Is the "HasFocus(container) with nested sub-containers" edge case defined as walking all descendants? [Edge Cases, Spec §Edge Case 9, §FR-010] — **PASS**: Edge Case 9 says "walks all descendant windows and returns true if any is the current focused window."
- [x] CHK062 Are edge cases defined for `ViSearchDirectionReversed` when `ReverseViSearchDirection` filter returns false (default)? [Gap] — **STRENGTHENED**: Added new Edge Case 10: "Returns false because DummyApplication's ReverseViSearchDirection is Never.Instance."
- [x] CHK063 Are edge cases defined for `BufferHasFocus` when no control has focus (e.g., empty layout)? [Gap] — **STRENGTHENED**: Added new Edge Case 11: "Returns false because the current control is not a BufferControl."

## Test Coverage Gaps

- [x] CHK064 Does the planned AppFiltersTests.cs (US1) have scenarios for all 11 properties including the 4 new ones (HasSuggestion, IsDone, RendererHeightIsKnown, InPasteMode)? [Test Coverage, plan §Project Structure] — **PASS (after strengthening)**: US1 now has 15 acceptance scenarios covering all 11 properties plus HasCompletions positive case, HasSelection negative, no-app-context, empty suggestion, and composition.
- [x] CHK065 Does the planned AppFiltersFocusTests.cs (US2) have scenarios for ALL 4 HasFocus overloads plus the non-memoization verification? [Test Coverage, plan §Project Structure] — **PASS**: US2 has 8 scenarios: string (AS1/AS2), Buffer (AS3), UIControl (AS4), Container (AS5), BufferHasFocus (AS6/AS7), non-memoization (AS8).
- [x] CHK066 Does the planned ViFiltersTests.cs (US3) cover all 11 Vi filters with both positive and negative (guard rejection) scenarios? [Test Coverage, plan §Project Structure] — **PASS (after strengthening)**: US3 now has 18 scenarios with explicit positive cases for all 11 filters and negative guard scenarios.
- [x] CHK067 Does the planned ViFiltersTests.cs include tests for each individual Guard A constituent (operator, digraph, selection) and Guard B constituent (temp nav, read-only)? [Test Coverage, Spec §FR-008] — **PASS (after strengthening)**: US3-AS12 (operator), AS13 (digraph), AS14 (selection), AS15 (temp nav), AS16 (read-only). All 5 constituents covered individually.
- [x] CHK068 Does the planned EmacsFiltersTests.cs (US4) cover the DummyApplication exception behavior (EmacsMode returns true without app context)? [Test Coverage, emacs-filters.md §DummyApplication Note] — **STRENGTHENED**: Added US4-AS7: "Given no active application context (DummyApplication), When EmacsMode is evaluated, Then it returns true."
- [x] CHK069 Does the planned SearchFiltersTests.cs (US5) include tests for the `BufferControl` type check in `ControlIsSearchable` (non-BufferControl returns false)? [Test Coverage, search-filters.md contract] — **STRENGTHENED**: Added US5-AS6: "Given a non-BufferControl with focus, When ControlIsSearchable is evaluated, Then it returns false."
- [x] CHK070 Does the planned InEditingModeTests.cs (US6) include reference equality verification for memoized instances? [Test Coverage, Spec §SC-005, §US6-AS3] — **PASS**: US6-AS3 says "both return the same cached filter instance". Testing via `Assert.Same()`.
- [x] CHK071 Are there test scenarios for filter composition (`&`, `|`, `~` operators) with application filters, per SC-003? [Test Coverage, Spec §SC-003] — **STRENGTHENED**: Added US1-AS15: "Given two application filters composed with & (AND), | (OR), or ~ (NOT), When the composed filter is evaluated, Then it produces the expected boolean result matching the operator semantics."
- [x] CHK072 Does the existing AppFiltersProcessorTests.cs (3 tests) need updating after Vi filters move from AppFilters to ViFilters? [Test Coverage, research §R-005 item 7] — **PASS**: Research R-005 item 7 documents the move. Plan lists "EXISTING: Keep existing ViInsertMultipleMode tests" — these tests will be updated to reference ViFilters as part of the refactoring (implicit in the class move). No spec change needed; this is an implementation detail.

## Dependencies & Assumptions

- [x] CHK073 Is the assumption that `AppContext.GetApp()` never returns null explicitly documented and validated? [Assumption, research §R-001] — **PASS**: Research R-001 states: "AppContext.GetApp() ... never returns null — when no application is running, it returns new DummyApplication()." Source code reference: AppContext.cs:44-53.
- [x] CHK074 Is the assumption that `DummyApplication` defaults to `EditingMode.Emacs` documented and its impact on Emacs filters noted? [Assumption, research §R-001] — **PASS**: Research R-001 documents "EditingMode defaults to EditingMode.Emacs". Emacs-filters.md contract has the "Important DummyApplication Note". Updated research R-001 now explicitly calls out the EmacsMode/EmacsInsertMode exception.
- [x] CHK075 Is the dependency on `LayoutUtils.Walk()` for `HasFocus(IContainer)` documented with the correct method signature? [Dependency, research §R-008] — **PASS**: Research R-008 provides the full code example using `LayoutUtils.Walk(container)` with source file reference (LayoutUtils.cs:24-43).
- [x] CHK076 Is the dependency on `SimpleCache<EditingMode, IFilter>` for `InEditingMode` documented with the expected capacity (2)? [Dependency, research §R-003] — **PASS**: Research R-003 specifies "SimpleCache<EditingMode, IFilter> with a small capacity (2, since EditingMode has only 2 values: Vi and Emacs)."
- [x] CHK077 Is the assumption that `Buffer.ReadOnly` is a computed bool (not a filter/callable) validated against the actual implementation? [Assumption, research §R-007] — **PASS**: Research R-007 explicitly validates: "Buffer.ReadOnly is a computed bool property backed by ReadOnlyFilter() (a Func<bool> invocation at Buffer.cs:144)."
- [x] CHK078 Is the dependency on `Window` implementing `IContainer` documented for the `HasFocus` fast-path optimization? [Dependency, research §R-008] — **PASS**: Research R-008 states: "Window implements IContainer in Stroke, so the HasFocus(IContainer container) overload handles both cases. Inside the lambda, check if the container is a Window first for the fast path."

## Notes

- This checklist covers all 4 requested dimensions: full requirements audit, faithful port fidelity, contract-spec alignment, and test coverage gaps.
- An existing `requirements.md` checklist (pre-planning gate) is in the same directory and covers basic spec quality. This checklist is the post-design, pre-implementation deep audit.
- Cross-references use `Spec §` for spec.md, `research §` for research.md, `plan §` for plan.md, and contract filenames for contract documents.

## Audit Summary

**Total items**: 78
**Passed without changes**: 64
**Strengthened (spec/research edits applied)**: 14

### Changes Applied

| Item(s) | Artifact | Change |
|---------|----------|--------|
| CHK014, CHK029 | spec.md §FR-008 | Added explicit `ViNavigationMode` positive logic (Navigation OR TemporaryNavigation OR ReadOnly) |
| CHK021 | research.md §R-001 | Fixed blanket "false for all" → "false for most" with Emacs exception |
| CHK044 | spec.md §SC-002 | Added Emacs exception qualification for DummyApplication behavior |
| CHK048 | spec.md §US1 | Added AS5: `HasCompletions` positive scenario |
| CHK050 | spec.md §US3 | Added AS1: `ViMode` positive and AS4: `ViInsertMultipleMode` positive |
| CHK051 | spec.md §US3 | Added AS13: digraph guard and AS14: selection guard negative scenarios |
| CHK029 | spec.md §US3 | Added AS17: `ViNavigationMode` read-only positive scenario |
| CHK055 | spec.md §Edge Case 1 | Qualified with Emacs exception for DummyApplication |
| CHK062 | spec.md §Edge Cases | Added new edge case: `ViSearchDirectionReversed` default behavior |
| CHK063 | spec.md §Edge Cases | Added new edge case: `BufferHasFocus` with non-BufferControl focus |
| CHK068 | spec.md §US4 | Added AS7: DummyApplication EmacsMode returns true |
| CHK069 | spec.md §US5 | Added AS6: non-BufferControl → `ControlIsSearchable` false |
| CHK071 | spec.md §US1 | Added AS15: filter composition scenario |
